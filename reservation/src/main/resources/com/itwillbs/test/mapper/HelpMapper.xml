<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.itwillbs.test.mapper.HelpMapper">

	<select id="getHelplist" parameterType="com.itwillbs.test.vo.HelpVO">
		SELECT *
			FROM help
				WHERE h_index = #{h_index}
	</select>
	
	<!-- QNA 작성시 insert -->
	<insert id="insertQNA">
		INSERT INTO QNA VALUES(
			NULL
			, #{q_subject}
			, #{q_context}
			, null
			, #{q_division}
			, #{q_category}
			, now()
			<choose>
				<when test="q_file != ''">
				, #{q_file}
				</when>
				<otherwise>
				, null
				</otherwise>
			</choose>
			, #{m_idx}
		)
	</insert>
	
	<!-- QNA 목록 가져오기 -->
	<select id="selectQNAList">
		SELECT *
		FROM QNA
		<if test="id != 'admin'">
			WHERE m_idx = (SELECT m_idx
							FROM members
							WHERE m_id = #{id})
		</if>
	</select>
    <!-- QNA 답변 -->
	<update id="updateQnaAnswer">
		UPDATE QNA
		SET q_re_context = #{q_re_context}
		WHERE q_idx = #{q_idx}
	</update>
</mapper>