<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.itwillbs.test.mapper.MemberMapper">
	<!-- 개인회원 정보 등록 -->
	<insert id="insertMember">
		INSERT 
			INTO members
			VALUES (
				NULL
				, #{m_id}
				, #{m_passwd} 
				, #{m_name}
				, #{m_nick} 
				, #{m_birth}
				, #{m_tel}
				, #{m_email}
				, 1
				, now()
			)
	</insert>
	<!-- 개인회원 정보 등록 끝 -->
	
	<!-- 회원 랜덤 비밀번호 발급 -->
	<update id="updatePassword">
		UPDATE members 
			SET m_passwd = #{m_passwd} 
			WHERE m_id = #{m_id} AND m_name = #{m_name}
	</update>
	
	<!-- 맴버 정보 수정 폼 접근 시 비밀번호 재확인 -->
	<select id="isCorrectMember" resultType="com.itwillbs.test.vo.MemberVO">
		    select * 
		    	from members
		    		where m_id = #{id} and m_passwd = #{passwd}
	</select>
	
	<!-- 멤버 정보 조회 -->
	<select id="selectMember" resultType="com.itwillbs.test.vo.MemberVO">
		    select * 
		    	from members
		    		where m_id = #{id}
	</select>
	
	<!-- 맴버 정보 수정 -->
	<update id="updateMember" parameterType="com.itwillbs.test.vo.MemberVO">
		update members 
			set m_name = #{m_name},
			    m_passwd = #{m_passwd},
			    m_nick = #{m_nick},
			    m_tel = #{m_tel},
<!-- 			    m_email = concat(#{email1}, '@', #{email2}), -->
				m_email = #{m_email},
			    m_passwd = #{m_passwd}
			    	where m_id = #{m_id}
	</update>
</mapper>